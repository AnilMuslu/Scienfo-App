import 'package:flutter/material.dart';
import 'package:adobe_xd/pinned.dart';
import './user_image.dart';
import 'exit_icon.dart';
import './favourites_button.dart';
import './settings_button.dart';
import './scienfo_settings_page.dart';
import 'package:adobe_xd/page_link.dart';
import './liked_content_field.dart';
import './search_icon_button.dart';
import './scienfo_search_page.dart';
import './profile_icon_button.dart';
import './home_icon_button.dart';
import './scienfo_content_page1.dart';
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_auth/firebase_auth.dart';

class ScienfoProfilePage extends StatefulWidget {
  ScienfoProfilePage({
    Key? key,
  }) : super(key: key);

  @override
  _ScienfoProfilePageState createState() => _ScienfoProfilePageState();
}

class _ScienfoProfilePageState extends State<ScienfoProfilePage> {
  String selectedUserType = 'pre-school'; //default value
  final firestoreInstance = FirebaseFirestore.instance;

  void updateUserType(String userId, String userType) async {
    await firestoreInstance
        .collection('users')
        .doc(userId)
        .update({'userType': userType});
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: const Color(0xffffffff),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            FavouritesButton(),
            SizedBox(height: 20),
            ElevatedButton(
              child: Text("Go to favorites"),
              onPressed: () => {
                // Your onPressed function here
              },
            ),
            SizedBox(height: 20),
            Text("Change profile type"),
            SizedBox(height: 10),
            SettingsButton(),
            DropdownButton<String>(
              dropdownColor: const Color.fromARGB(255, 105, 99, 92),
              value: selectedUserType,
              icon: const Icon(
                Icons.arrow_downward,
                color: Colors.white,
              ),
              iconSize: 24,
              elevation: 16,
              underline: Container(
                height: 2,
                color: Colors.deepPurpleAccent,
              ),
              onChanged: (String? newValue) {
                setState(() {
                  selectedUserType = newValue!;
                });
              },
              items: <String>['pre-school', 'primary school', 'middle school']
                  .map<DropdownMenuItem<String>>((String value) {
                return DropdownMenuItem<String>(
                  value: value,
                  child: Text(
                    value,
                    style: TextStyle(color: Colors.white),
                  ),
                );
              }).toList(),
            ),
            ElevatedButton(
              child: Text("Save"),
              onPressed: () => updateUserType(
                  FirebaseAuth.instance.currentUser!.uid, selectedUserType),
            ),
          ],
        ),
      ),
    );
  }
}
